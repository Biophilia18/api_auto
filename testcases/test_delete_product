- feature: Product模块
  story: 删除商品接口
  title: 删除成功-数据驱动

  #  params:
  #    - { name: "product-A023911", sku: "sku-100911", price: 5999, description: "联想电脑" }
  #    - { name: "product-B033911", sku: "sku-1009121", price: 12999, description: "苹果电脑" }
  #    - { name: "product-C034911", sku: "sku-1009031", price: 6999, description: "惠普电脑" }
  #  params_file: data/products.csv
  params:
    - { name: "new121", sku: "sku-new121", price: 1999, description: "数据库校验01" }
#    - { name: "new21", sku: "sku-new21", price: 1999, description: "数据库校验01" }
#    - { name: "db-test-012219", sku: "sku-db-012219", price: 2999, description: "数据库校验02" }

  request:
    method: post
    url: /product/create
    headers:
      Authorization: "Bearer ${token}"
    json:
      name: "${name}"
      sku: "${sku}"
      price: "${price}"
      description: "${description}"
  # ===== 提取信息 =====
  extract:
#    is_active: [ "json", "data.is_active" ]
    id: [ "json", "data.id" ]

  validate:
    equals:
      状态码为200: [ 200, status_code ]
      message字段为success: [ success, "json.message" ]

    contains:
      返回中包含id字段: [ "id", text ]

    db_validate:
      数据是否正确存储:
        sql: "select name, sku from products where id=${id}"
        expect: [ "${name}", "${sku}" ]